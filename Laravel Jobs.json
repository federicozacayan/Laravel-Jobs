[[1581191790579,"h1","Laravel Jobs"],[1581191790409,"p","Create a job."],[1581191790163,"html","php artisan make:job CheckPendingTaskJob"],[1581191789987,"p","app/Jobs/CheckPendingTaskJob.php"],[1581192220059,"javascript","<?php\nnamespace App\\Jobs;\nuse Illuminate\\Bus\\Queueable;\nuse Illuminate\\Contracts\\Queue\\ShouldQueue;\nuse Illuminate\\Foundation\\Bus\\Dispatchable;\nuse Illuminate\\Queue\\InteractsWithQueue;\nuse Illuminate\\Queue\\SerializesModels;\nclass CheckPendingTaskJob implements ShouldQueue\n{\n    public $param;\n    use Dispatchable, InteractsWithQueue, Queueable, SerializesModels;\n    public function __construct($param)\n    {\n        $this->param = $param;\n    }\n    public function handle()\n    {\n        echo \"Checking\\n\";//like a log, in console\n        //@todo \n        //1 - check database\n        //2 - do something like generate and send a report or email depending on database status.\n        echo \"Checked\\n\";//like a log, in console\n    }\n}\n"],[1581203990496,"p","Then dispatch the Job to do something that take time, like a bash process."],[1581192248513,"p","Be sure not to duplicate the process by placing a flag on the JOB and validating that this JOB has not been run or is not running."],[1581192248695,"javascript","// routes/web.php\nuse App\\Jobs\\CheckPendingTaskJob;\nRoute::get('check', function () {\n    $when = Carbon::createFromFormat(\n        'd/m/Y H:i:s',  \n        '19/02/2019 00:00:00'); \n    CheckPendingTaskJob::dispatch()\n                ->delay($when);//optional\n                return 'CheckPendingTaskJob Dispatched!';\n});"],[1581204659140,"p",".env"],[1581204730209,"javascript","QUEUE_CONNECTION=database"],[1581204730666,"p","Create table jobs."],[1581204730882,"javascript","php artisan queue:table"],[1581204659337,"p","Run migrations."],[1581204659502,"html","php artisan migrate"],[1581204825091,"p","Run the work. (Listener)"],[1581204825277,"html","php artisan queue:work"],[1581204976124,"p","More details in \"Laravel-Mails-Queue\" project.\n\n"],[1581192220287,"p","Check the official documentation in https://laravel.com/docs/6.x/queues\n"]]